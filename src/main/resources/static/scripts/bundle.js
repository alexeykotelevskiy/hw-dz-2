!function(e){var t={};function s(r){if(t[r])return t[r].exports;var n=t[r]={i:r,l:!1,exports:{}};return e[r].call(n.exports,n,n.exports,s),n.l=!0,n.exports}s.m=e,s.c=t,s.d=function(e,t,r){s.o(e,t)||Object.defineProperty(e,t,{configurable:!1,enumerable:!0,get:r})},s.r=function(e){Object.defineProperty(e,"__esModule",{value:!0})},s.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return s.d(t,"a",t),t},s.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},s.p="",s(s.s=3)}([function(e,t){e.exports=function(e,t){var s=e.prototype,r=t.prototype;for(var n in r)s[n]=r[n];return e}},function(e,t){function s(){}var r=s.prototype;function n(e,t,s){var r=e._eventable_registry;return t in r?r[t]:s?r[t]=[]:null}r._initEventable=function(){this._eventable_registry={}},r.on=function(e,t,s){return n(this,e,!0).push({handler:t,ctx:s}),this},r.off=function(e,t,s){var r=n(this,e);if(r)for(var i=r.length;i--;)if(r[i].handler===t&&r[i].ctx===s)return r.splice(i,1),this;return this},r.trigger=function(e,t){var s=n(this,e);if(s)for(var r=s.slice(),i=0,o=r.length;i!==o;i+=1)r[i].handler.call(r[i].ctx,t);return this},e.exports=s},function(e,t,s){var r=s(1),n="js-delete",i="js-save";function o(e){for(var t={},s=e.querySelectorAll("input, select, textarea"),r=0;r<s.length;++r){var n=s[r],i=n.name,o=n.value;i&&(t[i]=o)}return JSON.stringify(t)}function a(e){this.__form=e,this.__inputs=e.querySelectorAll("input, select, textarea"),this.__errors={},this.__showMessage="false"!==e.getAttribute("data-show-messages"),this.__showTop="false"!==e.getAttribute("data-show-top"),this.__deleteButton=e.querySelector("."+n),this.__saveButton=e.querySelector("."+i),this._initEventable(),this.__form.addEventListener("submit",this),this.__deleteButton&&this.__deleteButton.addEventListener("click",this)}s(0)(a,r);var l=a.prototype;function u(){this.remove()}l.removeError=function(e){if(e.classList.remove("has-success"),e.classList.remove("has-error"),0===Object.keys(this.__errors).length&&this.__saveButton.classList.remove("disable-button"),this.__showMessage){var t=e.parentElement.querySelector(".input-error");t&&t.remove()}},l.showError=function(e,t){if(this.removeError(e),t){if(this.__saveButton.classList.add("disable-button"),e.classList.add("has-error"),this.__showMessage){var s=document.createElement("span");s.classList.add("input-error"),s.innerText=t,e.parentElement.appendChild(s)}}else e.classList.add("has-success");return t},l.hideMessage=function(e){e.remove()},l.formSubmit=function(e){if(this.__errors=validate(this.__form,this.__constraings),this.__errors||(this.__errors={}),!this.__showTop)for(var t=0;t<this.__inputs.length;t++)this.showError(this.__inputs.item(t),this.__errors[this.__inputs.item(t).name]);if(Object.keys(this.__errors).length>0)e.preventDefault();else if(this.__showTop){e.preventDefault();var s=new XMLHttpRequest,r=this;s.onreadystatechange=function(){if(4===s.readyState)if(200!==s.status)console.log(s.responseText),alert("Something bad, try later"),window.location.reload();else{for(var e=0;e<r.__inputs.length;e++)r.removeError(r.__inputs.item(e));var t=document.createElement("div");t.innerText="SUCCESS SAVED!";var n=document.getElementsByTagName("body").item(0),i=n.firstChild;t.classList.add("top-message"),n.insertBefore(t,i),setTimeout(r.hideMessage,3e3,t)}},s.open("put","/list",!0),s.setRequestHeader("Content-Type","application/json"),s.send(o(this.__form))}},l.inputChanging=function(e){this.__errors=validate(this.__form,this.__constraings),this.__errors||(this.__errors={}),this.showError(e,this.__errors[e.name])},l.setValidating=function(e){this.__constraings=e;for(var t=0;t<this.__inputs.length;t++)this.__inputs.item(t).addEventListener("change",this)},l.deleteElement=function(){var e=this.__form.closest(".js-list-elem");e.classList.add("deleting");var t=new XMLHttpRequest;t.onreadystatechange=function(){4===t.readyState&&200!==t.status&&(alert("Something bad, try later"),window.location.reload())},t.open("delete","/list",!0),t.setRequestHeader("Content-Type","application/json"),t.send(o(this.__form)),e.addEventListener("transitionend",u,!1)},l.handleEvent=function(e){switch(e.type){case"change":this.inputChanging(e.target);break;case"submit":this.formSubmit(e);break;case"click":this.deleteElement()}},e.exports=a},function(e,t,s){document.addEventListener("DOMContentLoaded",function(){for(var e={email:{presence:!0,email:!0},name:{presence:!0,length:{maximum:30},format:{pattern:"[a-zА-Я -]+",message:"can only contain a-z,а-я,- and space",flags:"i"}}},t=s(2),r=document.getElementsByClassName("js-validating"),n=[],i=0;i<r.length;i++){var o=new t(r.item(i));o.setValidating(e),n.push(o)}})}]);